{"pageContext":{"version":"0.8","versions":{"releases":["1.0","0.9","0.8","0.7","0.6","0.5","0.4"],"branches":["master"]},"content":{"id":"asset-store","displayName":"Asset Store","description":"Overall documentation for Asset Store","type":"components","docs":[{"order":"01-01-asset-store","title":"Overview","source":"\nThe Asset Store is a Kubernetes-native solution for storing assets, such as documents, files, images, API specifications, and client-side applications.\n\nThis solution has a number of benefits:\n- It is flexible. You can use it for storing various types of assets, such as Markdown documents, ZIP, PNG, or JS files.\n- It is scalable. It allows you to store assets on a production system, using cloud provider storage services. At the same time, you can apply it to local development and use Minio to store assets on-premise.\n- It is multi-cloud and not locked into one vendor. When using the Asset Store in a production system, you can seamlessly switch between different major service providers, such as AWS S3 or Azure Blob.\n- It is location-independent. It allows you to expose files directly to the Internet and replicate them to different regions. This way, you can access them easily, regardless of your location.\n"},{"order":"02-01-asset-store","title":"Architecture","source":"\n## Resources\n\nThe whole concept of the Asset Store relies on the following components:\n\n- **Asset custom resource** (CR) is an obligatory [CR](#custom-resource-asset) in which you define the asset you want to store in a given storage bucket. Its definition requires the asset name and mode, the name of the Namespace in which it is available, the address of its web location, and the name of the bucket in which you want to store it. Optionally, you can specify the validation and mutation requirements that the asset must meet before it is stored.\n\n- **Asset Controller** (AC) manages the [Asset CR lifecycle](#details-asset-custom-resource-lifecycle).\n\n- **Bucket CR** is an obligatory [CR](#custom-resource-bucket) in which you define the name of the bucket for storing assets.\n\n- **Bucket Controller** manages the [Bucket CR lifecycle](#details-bucket-custom-resource-lifecycle).\n\n- **Validation Service** is an optional service which ensures that the asset meets the validation requirements specified in the Asset CR before uploading it to the bucket. The service returns the validation status to the AC.\n\n- **Mutation Service** is an optional service which ensures that the asset is modified according to the mutation specification defined in the Asset CR before it is uploaded to the bucket. The service returns the modified asset to the AC.\n\n- **Minio Gateway** is a Minio cluster mode which is a production-scalable storage solution. It ensures flexibility of using asset storage services from major cloud providers, including Azure Blob Storage, Amazon S3, and Google Cloud Storage.\n\n## Asset flow\n\nThis diagram provides an overview of the basic Asset Store workflow and the role of particular components in this process:\n\n![](./assets/asset-store-architecture.svg)\n\n1. The Kyma user creates a bucket through a Bucket CR.\n2. The Bucket Controller listens for new Events and acts upon receiving the Bucket CR creation Event.\n3. The Bucket Controller creates the bucket in the Minio Gateway storage.\n4. The Kyma user creates an Asset CR which specifies the reference to the asset source location and the name of the bucket for storing the asset.\n5. The AC listens for new Events and acts upon receiving the Asset CR creation Event.\n6. The AC reads the CR definition, checks if the Bucket CR is available, and if its name matches the bucket name referenced in the Asset CR. It also verifies if the Bucket CR is in the `Ready` phase.\n7. If the Bucket CR is available, the AC fetches the asset from the source location provided in the CR. If the asset is a ZIP or TAR file, the AC unpacks and optionally filters the asset before uploading it into the bucket.\n8. Optionally, the AC validates or modifies the asset if such a requirement is defined in the Asset CR. The AC communicates with the validation and mutation services and validates or modifies the asset according to the specification defined in the Asset CR.\n9. The AC uploads the asset to Minio Gateway, into the bucket specified in the Asset CR.\n10. The AC updates the status of the Asset CR with the storage location of the file in the bucket.\n"},{"order":"03-01-asset-cr-lifecycle","title":"Asset custom resource lifecycle","source":"\nLearn about the lifecycle of the Asset custom resource (CR) and how its creation, removal, or a change in the bucket reference affects other Asset Store components.\n\n## Create an Asset CR\n\nWhen you create an Asset CR, the Asset Controller (AC) receives a CR creation Event, reads the CR definition, verifies if the bucket exists, downloads the asset, unpacks it, and stores it in Minio Gateway.\n\n![](./assets/create-asset.svg)\n\n## Remove an Asset CR\n\nWhen you remove the Asset CR, the AC receives a CR deletion Event and deletes the CR from Minio Gateway.\n\n![](./assets/delete-asset.svg)\n\n## Change the bucket reference\n\nWhen you modify an Asset CR by updating the bucket reference in the Asset CR to a new one while the previous bucket still exists, the lifecycle starts again. The asset is created in a new storage location and this location is updated in the Asset CR.\n\nUnfortunately, this causes duplication of data as the assets from the previous bucket storage are not cleaned up by default. Thus, to avoid multiplication of assets, first remove one Bucket CR and then modify the existing Asset CR with a new bucket reference.\n\n![](./assets/modify-bucket-ref-asset.svg)\n\n## Change the Asset CR specification\n\nWhen you modify the Asset CR specification, the lifecycle starts again. The previous asset content is removed and no longer available.\n\n![](./assets/modify-asset.svg)\n","type":"Details"},{"order":"03-02-bucket-cr-lifecycle","title":"Bucket custom resource lifecycle","source":"\nLearn about the lifecycle of the Bucket custom resource (CR) and how its creation and removal affect other Asset Store components.\n\n\n## Create a Bucket CR\n\nWhen you create a Bucket CR, the Bucket Controller (BC) receives a CR creation Event and creates a bucket with the name specified in the CR. It is created in the Minio Gateway storage under the `ns-{NAMESPACE_NAME}-{CR_NAME}` location. The status of the CR contains a reference URL to the created bucket.\n\n\n![](./assets/create-bucket.svg)\n\n\n## Remove a Bucket CR\n\nWhen you remove the Bucket CR, the BC receives a CR deletion Event and removes the bucket with the whole content from Minio Gateway.\n\nThe Asset Controller (AC) also monitors the status of the referenced bucket. The AC checks the Bucket CR status to make sure the bucket exists. If you delete the bucket, the AC receives information that the files are no longer accessible and the bucket was removed. The AC updates the status of the Asset CR to `ready: False` and removes the asset storage reference. The Asset CR is still available and you can use it later for a new bucket.\n\n![](./assets/delete-bucket.svg)\n","type":"Details"},{"order":"03-03-minio-gateway","title":"Minio and Minio Gateway","source":"\nThe whole concept of the Asset Store relies on Minio as the storage solution. It supports the Kyma's manifesto and the \"batteries included\" rule by providing you with this on-premise solution by default.\n\nDepending on the usage scenario, you can:\n- Use Minio for local development.\n- Store your assets on a production scale using Minio in a [Gateway mode](https://github.com/minio/minio/tree/master/docs/gateway).\n\nThe Asset Store ensures that both usage scenarios work for Kyma, without additional configuration of the in-build controllers.\n\n## Development mode storage\n\nMinio is an open-source asset storage server with Amazon S3 compatible API. You can use it to store various types of assets, such as documents, files, or images.\n\nIn the context of the Asset Store, the Asset Controller stores all assets in Minio, in a dedicated storage space.\n\n![](./assets/minio.svg)\n\n\n## Production storage\n\nFor the production purposes, the Asset Store uses Minio Gateway which:\n\n- Is a multi-cloud solution that offers the flexibility to choose a given cloud provider for the specific Kyma installation, including Azure, Amazon, and Google\n- Allows you to use various cloud providers that support the data replication and CDN configuration\n- Is compatible with Amazon S3 APIs\n\n\n![](./assets/minio-gateway.svg)\n","type":"Details"},{"order":"03-04-asset-upload-service","title":"Asset Upload Service","source":"\nThe Asset Upload Service is an HTTP server that exposes the file upload functionality for Minio. It contains a simple HTTP endpoint which accepts `multipart/form-data` forms. It can upload files to the private and public system buckets. \n\nThe main purpose of the service is to provide a solution for hosting static files for components that use the Asset Store, such as the Application Connector. \nYou can also use the Asset Upload Service for development purposes to host files for the Asset Store, without the need to rely on external providers.\n\n## System buckets \n\nThe Asset Upload Service creates two system buckets, `system-private-{generated-suffix}` and `system-public-{generated-suffix}`, where `{generated-suffix}` is a Unix nano timestamp in the 32-base number system. The public bucket has a read-only policy specified.\n \nTo enable the service scaling and to maintain the bucket configuration data between the application restarts, the Asset Upload Service stores its configuration in the `assetstore-asset-upload-service` ConfigMap.\n\nOnce you upload the files, system buckets store them permanently. There is no policy to clean system buckets periodically.\n\n## Use the service outside the Kyma cluster\n\nYou can expose the service for development purposes. To use the Asset Upload Service on a local machine, run the following command:\n\n```bash\nkubectl port-forward deployment/assetstore-asset-upload-service 3000:3000 -n kyma-system\n```\n\nYou can access the service on port `3000`.\n\n\n### Upload files\n\nTo upload files, send the multipart form **POST** request to the `/v1/upload` endpoint. The endpoint recognizes the following field names:\n\n- `private` that is an array of files to upload to a private system bucket.  \n- `public` that is an array of files to upload to a public system bucket.  \n- `directory` that is an optional directory for storing the uploaded files. If you do not specify it, the service creates a directory with a random name. If the directory and files already exist, the service overwrites them.\n\nTo do the multipart request using `curl`, run the following command in this repository:\n\n```bash\ncurl -v -F directory='example' -F private=@sample.md -F private=@text-file.md -F public=@archive.zip http://localhost:3000/v1/upload\n```\n\nThe result is as follows:\n\n```json\n{\n   \"uploadedFiles\": [\n      {\n         \"fileName\": \"text-file.md\",\n         \"remotePath\": \"https://minio.kyma.local/private-1b0sjap35m9o0/example/text-file.md\",\n         \"bucket\": \"private-1b0sjap35m9o0\",\n         \"size\": 212\n      },\n      {\n         \"fileName\": \"archive.zip\",\n         \"remotePath\": \"https://minio.kyma.local/public-1b0sjaq6t6jr8/example/archive.zip\",\n         \"bucket\": \"public-1b0sjaq6t6jr8\",\n         \"size\": 630\n      },\n      {\n         \"fileName\": \"sample.md\",\n         \"remotePath\": \"https://minio.kyma.local/private-1b0sjap35m9o0/example/sample.md\",\n         \"bucket\": \"private-1b0sjap35m9o0\",\n         \"size\": 4414\n      }\n   ]\n}\n```\n\nSee the [Swagger specification](./assets/asset-upload-service-swagger.yaml) for the full API documentation. You can use the [Swagger Editor](https://editor.swagger.io) to preview and test the API service.\n","type":"Details"},{"order":"06-01-asset","title":"Asset","source":"\nThe `assets.assetstore.kyma-project.io` CustomResourceDefinition (CRD) is a detailed description of the kind of data and the format used to define an asset to store in a cloud storage bucket. To get the up-to-date CRD and show the output in the `yaml` format, run this command:\n\n```\nkubectl get crd assets.assetstore.kyma-project.io -o yaml\n```\n\n## Sample custom resource\n\nThis is a sample resource (CR) that provides details of the bucket for storing assets.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: Asset\nmetadata:\n  name: my-package-assets\n  namespace: default\nspec:\n  source:\n    mode: package\n    url: https://some.domain.com/structure.zip\n    filter: .*\\.md$\n  bucketRef:\n    name: my-bucket\n\n```\n\n### Validation and mutation webhook services\n\nYou can also define validation and mutation services:\n- **Validation webhook** performs the validation of fetched assets before the Asset Controller uploads them into the bucket. It can be a list of several different validation webhooks and all of them should be processed even if one fails. It can refer either to the validation of a specific file against a specification or to the security validation. The validation webhook returns the validation status when the validation completes.\n- **Mutation webhook** acts similarly to the validation service. The difference is that it mutates the asset instead of just validating it. For example, this can mean asset rewriting through the `regex` operation or `keyvalue`, or the modification in the JSON specification. The mutation webhook returns modified files instead of information on the status.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: Asset\nmetadata:\n  name: my-package-assets\n  namespace: default\nspec:\n  source:\n    mode: single\n    url: https://some.domain.com/main.js\n    validationWebhookService:\n    - name: swagger-operations-svc\n      namespace: default\n      endpoint: \"/validate\"\n    mutationWebhookService:\n    - name: swagger-operations-svc\n      namespace: default\n      endpoint: \"/mutate\"\n      metadata:\n        rewrite: keyvalue\n        pattern: \\json|yaml\n        data:\n          basePath: /test/v2\n  bucketRef:\n    name: my-bucket\nstatus:\n  phase: Failed\n  reason: ValidationFailed\n  message: \"The file is not valid against the provided json schema\"\n  lastHeartbeatTime: \"2018-01-03T07:38:24Z\"\n  observedGeneration: 1\n  assetRef:\n    assets:\n    - README.md\n    - directory/subdirectory/file.md\n    baseUrl: https://minio.kyma.local/ns-default-test-sample-1b19rnbuc6ir8/asset-sample\n\n```\n\n## Custom resource parameters\n\nThis table lists all possible parameters of a given resource together with their descriptions:\n\n\n| Parameter   |      Mandatory      |  Description |\n|:----------:|:-------------:|:------|\n| **metadata.name** |    **YES**   | Specifies the name of the CR. |\n| **metadata.namespace** |    **YES**   | Defines the Namespace in which the CR is available. |\n| **spec.source.mode** |    **YES**   | Specifies if the asset consists of one file or a set of compressed files in the ZIP or TAR formats. Use `single` for one file and `package` for a set of files. |\n| **spec.source.url** |    **YES**   | Specifies the location of the file. |\n| **spec.source.filter** |    **NO**   | Specifies the regex pattern used to select files to store from the package. |\n| **spec.source.validationwebhookservice** |    **NO**   | Provides specification of the validation webhook services. |\n| **spec.source.validationwebhookservice.name** |    **NO**   | Provides the name of the validation webhook service. |\n| **spec.source.validationwebhookservice.namespace** |    **NO**   | Provides the Namespace in which the service is available. It must be the same as the asset's Namespace. |\n| **spec.source.validationwebhookservice.endpoint** |    **NO**   | Specifies the endpoint to which the service sends calls. |\n| **spec.source.mutationwebhookservice** |    **NO**   | Provides specification of the mutation webhook services. |\n| **spec.source.mutationwebhookservice.name** |    **NO**   | Provides the name of the mutation webhook service. |\n| **spec.source.mutationwebhookservice.namespace** |    **NO**   | Provides the Namespace in which the service is available. It must be the same as the asset's Namespace. |\n| **spec.source.mutationwebhookservice.endpoint** |    **NO**   | Specifies the endpoint to which the service sends calls. |\n| **spec.source.mutationwebhookservice.metadata** |    **NO**   | Provides detailed metadata specific for a given mutation service and its functionality. |\n| **spec.bucketref.name** |    **YES**   | Provides the name of the bucket for storing the asset. |\n| **status.phase** |    **Not applicable**   | The Asset Controller adds it to the Asset CR. It describes the status of processing the Asset CR by the Asset Controller. It can be `Ready`, `Failed`, or `Pending`. |\n| **status.reason** |    **Not applicable**   | Provides the reason why the Asset CR processing failed or is pending.  |\n| **status.message** |    **Not applicable**   | Describes a human-readable message on the CR processing progress, success, or failure. |\n| **status.lastheartbeattime** |    **Not applicable**   | Provides the last time when the Asset Controller processed the Asset CR. |\n| **status.observedGeneration** |    **Not applicable**   | Specifies the most recent generation that the Asset Controller observes. |\n| **status.assetref** |    **Not applicable**   | Provides details on the location of the assets stored in the bucket.   |\n| **status.assetref.assets** |    **Not applicable**   | Provides the relative path to the given asset in the storage bucket. |\n| **status.assetref.baseurl** |    **Not applicable**   | Specifies the absolute path to the location of the assets in the storage bucket. |\n\n\n> **NOTE:** The Asset Controller automatically adds all parameters marked as **Not applicable** to the Asset CR.\n\n\n## Related resources and components\n\nThese are the resources related to this CR:\n\n| Custom resource |   Description |\n|:----------:|:------|\n| Bucket |  The Asset CR uses the name of the bucket specified in the definition of the Bucket CR. |\n\nThese components use this CR:\n\n| Component   |   Description |\n|:----------:|:------|\n| Asset Store |  Uses the Asset CR for the detailed asset definition, including its location and the name of the bucket in which it is stored. |\n","type":"Custom Resource"},{"order":"06-02-bucket","title":"Bucket","source":"\nThe `buckets.assetstore.kyma-project.io` CustomResourceDefinition (CRD) is a detailed description of the kind of data and the format used to define the name of the cloud storage bucket for storing assets. To get the up-to-date CRD and show the output in the `yaml` format, run this command:\n\n```\nkubectl get crd buckets.assetstore.kyma-project.io -o yaml\n```\n\n## Sample custom resource\n\nThis is a sample resource that defines the storage bucket configuration.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: Bucket\nmetadata:\n  name: test-sample\n  namespace: default\nspec:\n  region: \"us-east-1\"\n  policy: readonly\nstatus:\n  lastHeartbeatTime: \"2019-02-04T11:50:26Z\"\n  message: Bucket policy has been updated\n  phase: Ready\n  reason: BucketPolicyUpdated\n  remoteName: ns-default-test-sample-1b19rnbuc6ir8\n  observedGeneration: 1\n  url: https://minio.kyma.local/ns-default-test-sample-1b19rnbuc6ir8\n```\n\n## Custom resource parameters\n\nThis table lists all possible parameters of a given resource together with their descriptions:\n\n\n| Parameter   |      Mandatory      |  Description |\n|:----------:|:-------------:|:------|\n| **metadata.name** |    **YES**   | Specifies the name of the CR which is also used to generate the name of the bucket in the bucket storage. |\n| **metadata.namespace** |    **YES**   | Specifies the Namespace in which the CR is available. It is also used to generate the name of the bucket in the bucket storage. |\n| **spec.region** |    **NO**   | Specifies the location of the [region](https://github.com/kyma-project/kyma/blob/master/components/assetstore-controller-manager/config/crds/assetstore_v1alpha2_bucket.yaml#L48) under which the Bucket Controller creates the bucket. If the field is empty, the Bucket Controller creates the bucket under the default location. |\n| **spec.policy** | **NO** | Specifies the type of bucket access. Use `none`, `readonly`, `writeonly`, or `readwrite`. |\n| **status.lastheartbeattime** |    **Not applicable**    | Provides the last time when the Bucket Controller processed the Bucket CR. |\n| **status.message** |    **Not applicable**    | Describes a human-readable message on the CR processing success or failure. |\n| **status.phase** |    **Not applicable**    | The Bucket Controller automatically adds it to the Bucket CR. It describes the status of processing the Bucket CR by the Bucket Controller. It can be `Ready` or `Failed`. |\n| **status.reason** |    **Not applicable**    | Provides information on the Bucket CR processing success or failure. |\n| **status.url** |    **Not applicable**   | Provides the address of the bucket storage under which the asset is available. |\n| **status.remoteName** |    **Not applicable**   | Provides the name of the bucket in the storage. |\n| **status.observedGeneration** |    **Not applicable**   | Specifies the generation that the Bucket Controller observes. |\n\n> **NOTE:** The Bucket Controller automatically adds all parameters marked as **Not applicable** to the Bucket CR.\n\n## Related resources and components\n\nThese are the resources related to this CR:\n\n| Custom resource |   Description |\n|:----------:|:------|\n| Asset |  Provides the name of the storage bucket which the Asset CR refers to. |\n\nThese components use this CR:\n\n| Component   |   Description |\n|:----------:|:------|\n| Asset Store |  Uses the Bucket CR for the storage bucket definition. |\n","type":"Custom Resource"},{"order":"06-03-clusterasset","title":"ClusterAsset","source":"\nThe `clusterassets.assetstore.kyma-project.io` CustomResourceDefinition (CRD) is a detailed description of the kind of data and the format used to define an asset to store in a cloud storage bucket. To get the up-to-date CRD and show the output in the `yaml` format, run this command:\n\n```\nkubectl get crd clusterassets.assetstore.kyma-project.io -o yaml\n```\n\n## Sample custom resource\n\nThis is a sample resource (CR) that provides details of the bucket for storing assets.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: ClusterAsset\nmetadata:\n  name: my-package-assets\nspec:\n  source:\n    mode: package\n    url: https://some.domain.com/structure.zip\n    filter: .*\\.md$\n  bucketRef:\n    name: my-bucket\n\n```\n\n### Validation and mutation webhook services\n\nYou can also define validation and mutation services:\n- **Validation webhook** performs the validation of fetched assets before the ClusterAsset Controller uploads them into the bucket. It can be a list of several different validation webhooks and all of them should be processed even if one fails. It can refer either to the validation of a specific file against a specification or to the security validation. The validation webhook returns the validation status when the validation completes.\n- **Mutation webhook** acts similarly to the validation service. The difference is that it mutates the asset instead of just validating it. For example, this can mean asset rewriting through the `regex` operation or `keyvalue`, or the modification in the JSON specification. The mutation webhook returns modified files instead of information on the status.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: ClusterAsset\nmetadata:\n  name: my-package-assets\nspec:\n  source:\n    mode: single\n    url: https://some.domain.com/main.js\n    validationWebhookService:\n    - name: swagger-operations-svc\n      namespace: default\n      endpoint: \"/validate\"\n    mutationWebhookService:\n    - name: swagger-operations-svc\n      namespace: default\n      endpoint: \"/mutate\"\n      metadata:\n        rewrite: keyvalue\n        pattern: \\json|yaml\n        data:\n          basePath: /test/v2\n  bucketRef:\n    name: my-bucket\nstatus:\n  phase: Failed\n  reason: ValidationFailed\n  message: \"The file is not valid against the provided json schema\"\n  lastHeartbeatTime: \"2018-01-03T07:38:24Z\"\n  observedGeneration: 1\n  assetRef:\n    assets:\n    - README.md\n    - directory/subdirectory/file.md\n    baseUrl: https://minio.kyma.local/test-sample-1b19rnbuc6ir8/asset-sample\n\n```\n\n## Custom resource parameters\n\nThis table lists all possible parameters of a given resource together with their descriptions:\n\n\n| Parameter   |      Mandatory      |  Description |\n|:----------:|:-------------:|:------|\n| **metadata.name** |    **YES**   | Specifies the name of the CR. |\n| **spec.source.mode** |    **YES**   | Specifies if the asset consists of one file or a set of compressed files in the ZIP or TAR formats. Use `single` for one file and `package` for a set of files. |\n| **spec.source.url** |    **YES**   | Specifies the location of the file. |\n| **spec.source.filter** |    **NO**   | Specifies the regex pattern used to select files to store from the package. |\n| **spec.source.validationwebhookservice** |    **NO**   | Provides specification of the validation webhook services. |\n| **spec.source.validationwebhookservice.name** |    **NO**   | Provides the name of the validation webhook service. |\n| **spec.source.validationwebhookservice.namespace** |    **NO**   | Provides the Namespace in which the service is available. It must be the same as the asset's Namespace. |\n| **spec.source.validationwebhookservice.endpoint** |    **NO**   | Specifies the endpoint to which the service sends calls. |\n| **spec.source.mutationwebhookservice** |    **NO**   | Provides specification of the mutation webhook services. |\n| **spec.source.mutationwebhookservice.name** |    **NO**   | Provides the name of the mutation webhook service. |\n| **spec.source.mutationwebhookservice.namespace** |    **NO**   | Provides the Namespace in which the service is available. It must be the same as the asset's Namespace. |\n| **spec.source.mutationwebhookservice.endpoint** |    **NO**   | Specifies the endpoint to which the service sends calls. |\n| **spec.source.mutationwebhookservice.metadata** |    **NO**   | Provides detailed metadata specific for a given mutation service and its functionality. |\n| **spec.bucketref.name** |    **YES**   | Provides the name of the bucket for storing the asset. |\n| **status.phase** |    **Not applicable**   | The ClusterAsset Controller adds it to the ClusterAsset CR. It describes the status of processing the ClusterAsset CR by the ClusterAsset Controller. It can be `Ready`, `Failed`, or `Pending`. |\n| **status.reason** |    **Not applicable**   | Provides the reason why the ClusterAsset CR processing failed or is pending.  |\n| **status.message** |    **Not applicable**   | Describes a human-readable message on the CR processing progress, success, or failure. |\n| **status.lastheartbeattime** |    **Not applicable**   | Provides the last time when the ClusterAsset Controller processed the ClusterAsset CR. |\n| **status.observedGeneration** |    **Not applicable**   | Specifies the most recent generation that the ClusterAsset Controller observes. |\n| **status.assetref** |    **Not applicable**   | Provides details on the location of the assets stored in the bucket.   |\n| **status.assetref.assets** |    **Not applicable**   | Provides the relative path to the given asset in the storage bucket. |\n| **status.assetref.baseurl** |    **Not applicable**   | Specifies the absolute path to the location of the assets in the storage bucket.   |\n\n\n> **NOTE:** The ClusterAsset Controller automatically adds all parameters marked as **Not applicable** to the ClusterAsset CR.\n\n\n## Related resources and components\n\nThese are the resources related to this CR:\n\n| Custom resource |   Description |\n|:----------:|:------|\n| ClusterBucket |  The ClusterAsset CR uses the name of the bucket specified in the definition of the ClusterBucket CR. |\n\nThese components use this CR:\n\n| Component   |   Description |\n|:----------:|:------|\n| Asset Store |  Uses the ClusterAsset CR for the detailed asset definition, including its location and the name of the bucket in which it is stored. |\n","type":"Custom Resource"},{"order":"06-04-clusterbucket","title":"ClusterBucket","source":"\nThe `clusterbuckets.assetstore.kyma-project.io` CustomResourceDefinition (CRD) is a detailed description of the kind of data and the format used to define the name of the cloud storage bucket for storing assets. To get the up-to-date CRD and show the output in the `yaml` format, run this command:\n\n```\nkubectl get crd clusterbuckets.assetstore.kyma-project.io -o yaml\n```\n\n## Sample custom resource\n\nThis is a sample resource that defines the storage bucket configuration.\n\n```\napiVersion: assetstore.kyma-project.io/v1alpha2\nkind: ClusterBucket\nmetadata:\n  name: test-sample\nspec:\n  region: \"us-east-1\"\n  policy: readonly\nstatus:\n  lastHeartbeatTime: \"2019-02-04T11:50:26Z\"\n  message: Bucket policy has been updated\n  phase: Ready\n  reason: BucketPolicyUpdated\n  remoteName: test-sample-1b19rnbuc6ir8\n  url: https://minio.kyma.local/test-sample-1b19rnbuc6ir8\n  observedGeneration: 1\n```\n\n## Custom resource parameters\n\nThis table lists all possible parameters of a given resource together with their descriptions:\n\n\n| Parameter   |      Mandatory      |  Description |\n|:----------:|:-------------:|:------|\n| **metadata.name** |    **YES**   | Specifies the name of the CR which is also the prefix of the bucket name in the bucket storage. |\n| **spec.region** |    **NO**   | Specifies the location of the [region](https://github.com/kyma-project/kyma/blob/master/components/assetstore-controller-manager/config/crds/assetstore_v1alpha2_bucket.yaml#L48) under which the ClusterBucket Controller creates the bucket. If the field is empty, the ClusterBucket Controller creates the bucket under the default location. |\n| **spec.policy** | **NO** | Specifies the type of bucket access. Use `none`, `readonly`, `writeonly`, or `readwrite`. |\n| **status.lastheartbeattime** |    **Not applicable**    | Provides the last time when the ClusterBucket Controller processed the ClusterBucket CR. |\n| **status.message** |    **Not applicable**    | Describes a human-readable message on the CR processing success or failure. |\n| **status.phase** |    **Not applicable**    | The ClusterBucket Controller automatically adds it to the ClusterBucket CR. It describes the status of processing the ClusterBucket CR by the ClusterBucket Controller. It can be `Ready` or `Failed`. |\n| **status.reason** |    **Not applicable**    | Provides information on the ClusterBucket CR processing success or failure. |\n| **status.url** |    **Not applicable**   | Provides the address of the bucket storage under which the asset is available. |\n| **status.remoteName** |    **Not applicable**   | Provides the name of the bucket in storage. |\n| **status.observedGeneration** |    **Not applicable**   | Specifies the most recent generation that the ClusterBucket Controller observes. |\n\n> **NOTE:** The ClusterBucket Controller automatically adds all parameters marked as **Not applicable** to the ClusterBucket CR.\n\n## Related resources and components\n\nThese are the resources related to this CR:\n\n| Custom resource |   Description |\n|:----------:|:------|\n| ClusterAsset |  Provides the name of the storage bucket which the ClusterAsset CR refers to. |\n\nThese components use this CR:\n\n| Component   |   Description |\n|:----------:|:------|\n| Asset Store |  Uses the ClusterBucket CR for the storage bucket definition. |\n","type":"Custom Resource"}]},"navigation":{"topics":[{"id":"kyma","contentType":"root","sections":[{"topicType":"Overview","name":"Overview","anchor":"overview","titles":[{"name":"In a nutshell","anchor":"in-a-nutshell"},{"name":"Main features","anchor":"main-features"},{"name":"Technology stack","anchor":"technology-stack"},{"name":"Key components","anchor":"key-components"},{"name":"Kyma and Knative - brothers in arms","anchor":"kyma-and-knative---brothers-in-arms"},{"name":"How to start","anchor":"how-to-start"}]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Components","anchor":"components"},{"name":"Namespaces","anchor":"namespaces"},{"name":"Testing Kyma","anchor":"testing-kyma"},{"name":"Charts","anchor":"charts"},{"name":"Deploy with a private Docker registry","anchor":"deploy-with-a-private-docker-registry"}]},{"topicType":"Installation","name":"Installation","anchor":"installation","titles":[{"name":"Overview","anchor":"overview"},{"name":"Install Kyma locally from the release","anchor":"install-kyma-locally-from-the-release"},{"name":"Install Kyma locally from sources","anchor":"install-kyma-locally-from-sources"},{"name":"Install Kyma on a GKE cluster","anchor":"install-kyma-on-a-gke-cluster"},{"name":"Install Kyma on an AKS cluster","anchor":"install-kyma-on-an-aks-cluster"},{"name":"Install Kyma on a GKE cluster with wildcard DNS","anchor":"install-kyma-on-a-gke-cluster-with-wildcard-dns"},{"name":"Install Kyma on an AKS cluster with wildcard DNS","anchor":"install-kyma-on-an-aks-cluster-with-wildcard-dns"},{"name":"Custom component installation","anchor":"custom-component-installation"},{"name":"Installation with Knative","anchor":"installation-with-knative"},{"name":"Update Kyma","anchor":"update-kyma"},{"name":"Reinstall Kyma","anchor":"reinstall-kyma"},{"name":"Local installation scripts deep-dive","anchor":"local-installation-scripts-deep-dive"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Installation","anchor":"installation"}]},{"topicType":"Tutorials","name":"Tutorials","anchor":"tutorials","titles":[{"name":"Sample service deployment on local","anchor":"sample-service-deployment-on-local"},{"name":"Sample service deployment on a cluster","anchor":"sample-service-deployment-on-a-cluster"},{"name":"Develop a service locally without using Docker","anchor":"develop-a-service-locally-without-using-docker"},{"name":"Publish a service Docker image and deploy it to Kyma","anchor":"publish-a-service-docker-image-and-deploy-it-to-kyma"},{"name":"Helm overrides for Kyma installation","anchor":"helm-overrides-for-kyma-installation"}]},{"topicType":"Examples","name":"Examples","anchor":"examples","titles":[{"name":"Kyma features and concepts in practice","anchor":"kyma-features-and-concepts-in-practice"}]}]},{"id":"security","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Kubeconfig generator","anchor":"kubeconfig-generator"},{"name":"GraphQL","anchor":"graphql"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Group","anchor":"group"},{"name":"IDPPreset","anchor":"idppreset"}]},{"topicType":"Tutorials","name":"Tutorials","anchor":"tutorials","titles":[{"name":"Update TLS certificate","anchor":"update-tls-certificate"},{"name":"Manage static users in Dex","anchor":"manage-static-users-in-dex"},{"name":"Add an Identity Provider to Dex","anchor":"add-an-identity-provider-to-dex"}]}]},{"id":"service-catalog","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Resources","anchor":"resources"},{"name":"Provisioning and binding","anchor":"provisioning-and-binding"},{"name":"Service Catalog backup and restore","anchor":"service-catalog-backup-and-restore"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"ServiceBindingUsage","anchor":"servicebindingusage"},{"name":"UsageKind","anchor":"usagekind"}]},{"topicType":null,"name":"CLI reference","anchor":"cli-reference","titles":[]},{"topicType":"Tutorials","name":"Tutorials","anchor":"tutorials","titles":[{"name":"Register a broker in the Service Catalog","anchor":"register-a-broker-in-the-service-catalog"}]},{"topicType":"UI Contracts","name":"UI Contracts","anchor":"ui-contracts","titles":[{"name":"Overview","anchor":"overview"},{"name":"Catalog view","anchor":"catalog-view"},{"name":"Instances View","anchor":"instances-view"}]},{"topicType":"Service Brokers","name":"Service Brokers","anchor":"service-brokers","titles":[{"name":"Overview","anchor":"overview"},{"name":"GCP Broker","anchor":"gcp-broker"},{"name":"Azure Service Broker","anchor":"azure-service-broker"}]}]},{"id":"helm-broker","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Configuration","name":"Configuration","anchor":"configuration","titles":[{"name":"Configure Helm Broker","anchor":"configure-helm-broker"},{"name":"Create a bundle","anchor":"create-a-bundle"},{"name":"Binding bundles","anchor":"binding-bundles"}]}]},{"id":"application-connector","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":"Architecture","name":"Architecture","anchor":"architecture","titles":[{"name":"Application Connector components","anchor":"application-connector-components"},{"name":"Connector Service","anchor":"connector-service"},{"name":"Application Gateway","anchor":"application-gateway"},{"name":"Application Broker","anchor":"application-broker"}]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Security","anchor":"security"},{"name":"Access the Application Connector on a local Kyma deployment","anchor":"access-the-application-connector-on-a-local-kyma-deployment"},{"name":"Consume applications through the Service Catalog","anchor":"consume-applications-through-the-service-catalog"},{"name":"Application Registry","anchor":"application-registry"},{"name":"Pass an access token in a request header","anchor":"pass-an-access-token-in-a-request-header"},{"name":"Payload size limits for registering APIs","anchor":"payload-size-limits-for-registering-apis"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Application","anchor":"application"},{"name":"ApplicationMapping","anchor":"applicationmapping"},{"name":"EventActivation","anchor":"eventactivation"},{"name":"TokenRequest","anchor":"tokenrequest"}]},{"topicType":"Tutorials","name":"Tutorials","anchor":"tutorials","titles":[{"name":"Create a new Application","anchor":"create-a-new-application"},{"name":"Get the client certificate","anchor":"get-the-client-certificate"},{"name":"Register a service","anchor":"register-a-service"},{"name":"Register a secured API","anchor":"register-a-secured-api"},{"name":"Trigger a lambda with events","anchor":"trigger-a-lambda-with-events"},{"name":"Call a registered external service from Kyma","anchor":"call-a-registered-external-service-from-kyma"},{"name":"Bind an Application to a Namespace","anchor":"bind-an-application-to-a-namespace"},{"name":"Renew the client certificate","anchor":"renew-the-client-certificate"},{"name":"Revoke the client certificate","anchor":"revoke-the-client-certificate"}]},{"topicType":"API","name":"API","anchor":"api","titles":[{"name":"Connector Service","anchor":"connector-service"},{"name":"Application Registry","anchor":"application-registry"},{"name":"Event Service","anchor":"event-service"}]}]},{"id":"event-bus","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Basic concepts","anchor":"basic-concepts"},{"name":"Event flow requirements","anchor":"event-flow-requirements"},{"name":"Service Programming Model","anchor":"service-programming-model"},{"name":"Troubleshooting","anchor":"troubleshooting"},{"name":"Subscription updates","anchor":"subscription-updates"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Subscription","anchor":"subscription"}]},{"topicType":null,"name":"CLI reference","anchor":"cli-reference","titles":[]}]},{"id":"service-mesh","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Sidecar Proxy Injection","anchor":"sidecar-proxy-injection"},{"name":"Istio patch","anchor":"istio-patch"}]}]},{"id":"serverless","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Custom Resources","anchor":"custom-resources"},{"name":"Managing Lambdas","anchor":"managing-lambdas"},{"name":"The Node.js Runtime","anchor":"the-node.js-runtime"}]},{"topicType":null,"name":"CLI reference","anchor":"cli-reference","titles":[]}]},{"id":"monitoring","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Tutorials","name":"Tutorials","anchor":"tutorials","titles":[{"name":"Expose custom metrics in Kyma","anchor":"expose-custom-metrics-in-kyma"}]}]},{"id":"tracing","contentType":"components","sections":[{"topicType":"Overview","name":"Overview","anchor":"overview","titles":[{"name":"Overview","anchor":"overview"}]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Benefits of distributed tracing","anchor":"benefits-of-distributed-tracing"},{"name":"Jaeger","anchor":"jaeger"},{"name":"Propagate HTTP headers","anchor":"propagate-http-headers"},{"name":"Compare traces","anchor":"compare-traces"}]}]},{"id":"api-gateway","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Security","anchor":"security"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Api","anchor":"api"}]}]},{"id":"logging","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Access logs","anchor":"access-logs"},{"name":"Storage configuration","anchor":"storage-configuration"}]}]},{"id":"backup","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Configuration","anchor":"configuration","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Back up a Kyma cluster","anchor":"back-up-a-kyma-cluster"},{"name":"Restore a Kyma cluster","anchor":"restore-a-kyma-cluster"}]}]},{"id":"console","contentType":"components","sections":[{"topicType":"Overview","name":"Overview","anchor":"overview","titles":[{"name":"Overview","anchor":"overview"}]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"UI extensibility","anchor":"ui-extensibility"},{"name":"UI API Layer","anchor":"ui-api-layer"},{"name":"Security guidelines for MicroFrontend and ClusterMicroFrontend CRs","anchor":"security-guidelines-for-microfrontend-and-clustermicrofrontend-crs"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"MicroFrontend","anchor":"microfrontend"},{"name":"ClusterMicroFrontend","anchor":"clustermicrofrontend"},{"name":"BackendModule","anchor":"backendmodule"}]}]},{"id":"asset-store","contentType":"components","sections":[{"topicType":null,"name":"Overview","anchor":"overview","titles":[]},{"topicType":null,"name":"Architecture","anchor":"architecture","titles":[]},{"topicType":"Details","name":"Details","anchor":"details","titles":[{"name":"Asset custom resource lifecycle","anchor":"asset-custom-resource-lifecycle"},{"name":"Bucket custom resource lifecycle","anchor":"bucket-custom-resource-lifecycle"},{"name":"Minio and Minio Gateway","anchor":"minio-and-minio-gateway"},{"name":"Asset Upload Service","anchor":"asset-upload-service"}]},{"topicType":"Custom Resource","name":"Custom Resource","anchor":"custom-resource","titles":[{"name":"Asset","anchor":"asset"},{"name":"Bucket","anchor":"bucket"},{"name":"ClusterAsset","anchor":"clusterasset"},{"name":"ClusterBucket","anchor":"clusterbucket"}]}]}]},"manifest":{"root":[{"displayName":"Kyma","id":"kyma"}],"components":[{"displayName":"Security","id":"security"},{"displayName":"Service Catalog","id":"service-catalog"},{"displayName":"Helm Broker","id":"helm-broker"},{"displayName":"Application Connector","id":"application-connector"},{"displayName":"Event Bus","id":"event-bus"},{"displayName":"Service Mesh","id":"service-mesh"},{"displayName":"Serverless","id":"serverless"},{"displayName":"Monitoring","id":"monitoring"},{"displayName":"Tracing","id":"tracing"},{"displayName":"API Gateway","id":"api-gateway"},{"displayName":"Logging","id":"logging"},{"displayName":"Backup","id":"backup"},{"displayName":"Console","id":"console"},{"displayName":"Asset Store","id":"asset-store"}]},"assetsPath":"/assets/docs/0.8/asset-store/docs/assets/","locale":"en"}}